(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{7689:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var l=a(5155),s=a(2115),n=a(2108),i=a(8543),c=a(1934);let o=e=>{let{onClose:t}=e,[a,n]=(0,s.useState)(null);return(0,l.jsxs)(c.P.div,{className:"modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,l.jsx)("h2",{children:"Upload Document"}),(0,l.jsx)("input",{type:"file",accept:".pdf,.jpg,.png",onChange:e=>{n(e.target.files[0])}}),(0,l.jsx)("button",{onClick:()=>{if(!a)return void i.oR.error("Please select a file");fetch("/api/vault/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,type:a.type})}).then(e=>e.json()).then(()=>{i.oR.success("File metadata uploaded successfully"),t()}).catch(()=>i.oR.error("Failed to upload file metadata"))},children:"Upload"}),(0,l.jsx)("button",{onClick:t,children:"Close"})]})},r=e=>{let{children:t}=e;return(0,l.jsxs)("div",{className:"vault-layout",children:[(0,l.jsx)("header",{children:(0,l.jsx)("h1",{children:"Vault"})}),(0,l.jsx)("main",{children:t})]})},d=()=>{let[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(async()=>{await (0,n.getSession)()})()},[]),(0,s.useEffect)(()=>{fetch("/api/vault/list").then(e=>e.json()).then(e=>t(e)).catch(e=>i.oR.error("Failed to load documents"))},[]),(0,l.jsx)(r,{children:(0,l.jsxs)("div",{className:"vault-page",children:[(0,l.jsx)("h1",{children:"Your Document Vault"}),(0,l.jsx)("button",{onClick:()=>c(!0),children:"Upload Document"}),(0,l.jsx)("ul",{children:e.map((e,t)=>(0,l.jsx)("li",{children:e.name},t))}),a&&(0,l.jsx)(o,{onClose:()=>c(!1)})]})})}},8849:(e,t,a)=>{Promise.resolve().then(a.bind(a,7689))}},e=>{var t=t=>e(e.s=t);e.O(0,[892,108,934,543,441,684,358],()=>t(8849)),_N_E=e.O()}]);